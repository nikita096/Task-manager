{"remainingRequest":"/Users/nikitabugaev/Desktop/t-m/task-manger/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nikitabugaev/Desktop/t-m/task-manger/src/views/Tasks.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nikitabugaev/Desktop/t-m/task-manger/src/views/Tasks.vue","mtime":1593867808468},{"path":"/Users/nikitabugaev/Desktop/t-m/task-manger/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nikitabugaev/Desktop/t-m/task-manger/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nikitabugaev/Desktop/t-m/task-manger/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nikitabugaev/Desktop/t-m/task-manger/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUYXNrc1RhYmxlIGZyb20gJ0AvY29tcG9uZW50cy9UYXNrc1RhYmxlJwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOid0YXNrcycsCiAgICBkYXRhOiAoKT0+KHsKICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAgIHJlY29yZHM6IFtdLAogICAgICAgIGRhdGU6IG5ldyBEYXRlKCksCiAgICAgICAgZmlsdGVyOiAnYWxsJywKICAgIH0pLAogICAgYXN5bmMgbW91bnRlZCgpewogICAgICAgIGNvbnN0IHJlY29yZHMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZmV0Y2hSZWNvcmRzJykKICAgICAgICB0aGlzLnNldHVwUmVjb3JkcyhyZWNvcmRzKQogICAgICAgIE0uRm9ybVNlbGVjdC5pbml0KHRoaXMuJHJlZnMuc2VsZWN0KQogICAgICAgIE0udXBkYXRlVGV4dEZpZWxkcygpCiAgICAgICAgdGhpcy5sb2FkaW5nPSBmYWxzZSAgICAgICAgICAgCgogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgZGlzcGxheVRhc2tzKCl7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlY29yZHMuZmlsdGVyKHQ9PnsKICAgICAgICAgICAgICAgIGlmKHRoaXMuZmlsdGVyID09PSAnYWxsJyl7IHJldHVybiB0cnVlfQogICAgICAgICAgICAgICAgcmV0dXJuIHQuVXBkYXRlU3RhdHVzID09PSB0aGlzLmZpbHRlcgogICAgICAgICAgICB9KQogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgICBzZXR1cFJlY29yZHMocmVjb3Jkcyl7CiAgICAgICAgICAgIHRoaXMucmVjb3JkcyA9IHJlY29yZHMubWFwKHJlY29yZCA9PnsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgLi4ucmVjb3JkLAogICAgICAgICAgICAgICAgICAgIHN0YXR1c0NsYXNzOiByZWNvcmQuc3RhdHVzID09PSAnY29tcGxpdGVkJyA/ICdncmVlbicgOiAocmVjb3JkLnN0YXR1cyA9PT0gJ2FjdGl2ZScpICYmIChuZXcgRGF0ZShyZWNvcmQuZGF0ZSkgPiB0aGlzLmRhdGUpPyAneWVsbG93JyA6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6ICByZWNvcmQuc3RhdHVzID09PSAnY29tcGxpdGVkJyA/ICdjb21wbGl0ZWQnIDogKChuZXcgRGF0ZShyZWNvcmQuZGF0ZSkgPiB0aGlzLmRhdGUpICYmIChyZWNvcmQuc3RhdHVzID09PSAnYWN0aXZlJykpID8gJ2FjdGl2ZScgOiAnb3V0ZGF0ZWQnLAogICAgICAgICAgICAgICAgICAgIFVwZGF0ZVN0YXR1czogcmVjb3JkLnN0YXR1cyA9PT0gJ2NvbXBsaXRlZCcgPyAnY29tcGxpdGVkJyA6IChyZWNvcmQuc3RhdHVzID09PSAnYWN0aXZlJykgJiYgKG5ldyBEYXRlKHJlY29yZC5kYXRlKSA+IHRoaXMuZGF0ZSk/ICdhY3RpdmUnIDogJ291dGRhdGVkJywKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKCiAgICAgICAgfQogICAgfSwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBUYXNrc1RhYmxlCiAgICB9Cn0K"},{"version":3,"sources":["Tasks.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Tasks.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <main class=\"app-content\">\n            <div class=\"app-page\">\n                <div>\n                    <div class=\"page-title\">\n                        <h3>Список задач </h3>\n                    </div>     \n                      <div class=\"row \"> \n                            <div class=\"input-field col s3\">   \n                                <select class=\"input-field\" ref=\"select\" v-model=\"filter\">\n                                    <option value=\"all\"  selected>All tasks</option>\n                                    <option value=\"active\" >Active</option>\n                                    <option value=\"complited\">Complited</option>\n                                    <option value=\"outdated\">Outdated</option>\n                                 </select>\n                                <label>Status filter</label>\n                            </div>\n                        </div>         \n                    <Loader v-if=\"loading\"/>\n                     <p class=\"center\" v-else-if=\"!records.length\">Записи отсутствуют.</p>\n                    <section v-else > \n                        <TasksTable :records=\"displayTasks\"/>   \n                    </section>\n                </div>\n            </div>\n    </main>\n</template>\n<script>\nimport TasksTable from '@/components/TasksTable'\nexport default {\n    name:'tasks',\n    data: ()=>({\n        loading: true,\n        records: [],\n        date: new Date(),\n        filter: 'all',\n    }),\n    async mounted(){\n        const records = await this.$store.dispatch('fetchRecords')\n        this.setupRecords(records)\n        M.FormSelect.init(this.$refs.select)\n        M.updateTextFields()\n        this.loading= false           \n\n    },\n    computed: {\n        displayTasks(){\n            return this.records.filter(t=>{\n                if(this.filter === 'all'){ return true}\n                return t.UpdateStatus === this.filter\n            })\n        }\n    },\n    methods:{\n        setupRecords(records){\n            this.records = records.map(record =>{\n                return {\n                    ...record,\n                    statusClass: record.status === 'complited' ? 'green' : (record.status === 'active') && (new Date(record.date) > this.date)? 'yellow' : 'red',\n                    statusText:  record.status === 'complited' ? 'complited' : ((new Date(record.date) > this.date) && (record.status === 'active')) ? 'active' : 'outdated',\n                    UpdateStatus: record.status === 'complited' ? 'complited' : (record.status === 'active') && (new Date(record.date) > this.date)? 'active' : 'outdated',\n                    \n                }\n            })\n\n        }\n    },\n    components: {\n        TasksTable\n    }\n}\n</script>"]}]}