{"remainingRequest":"/Users/nikitabugaev/Desktop/t-m/task-manger/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nikitabugaev/Desktop/t-m/task-manger/src/views/Tasks.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nikitabugaev/Desktop/t-m/task-manger/src/views/Tasks.vue","mtime":1594161830772},{"path":"/Users/nikitabugaev/Desktop/t-m/task-manger/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nikitabugaev/Desktop/t-m/task-manger/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nikitabugaev/Desktop/t-m/task-manger/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUYXNrc1RhYmxlIGZyb20gJ0AvY29tcG9uZW50cy9UYXNrc1RhYmxlJwppbXBvcnQgcGFnaW5hdGlvbk1peGluIGZyb20gJ0AvbWl4aW5zL3BhZ2luYXRpb25fbWl4aW4nCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6J3Rhc2tzJywKICAgIG1ldGFJbmZvOiB7CiAgICAgIHRpdGxlOiAn0J/RgNC+0YHQvNC+0YLRgCDQt9Cw0LTQsNGHIHwg0J3QuNC60LjRgtCwIFRNJwogICAgfSwKICAgIG1peGluczogW3BhZ2luYXRpb25NaXhpbl0sCiAgICBkYXRhOiAoKT0+KHsKICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAgIHJlY29yZHM6IFtdLAogICAgICAgIGRhdGU6IG5ldyBEYXRlKCksCiAgICAgICAgZmlsdGVyOiAnYWxsJywKICAgIH0pLAogICAgYXN5bmMgbW91bnRlZCgpewogICAgICAgIGNvbnN0IHJlY29yZHMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZmV0Y2hSZWNvcmRzJykKICAgICAgICB0aGlzLnNldHVwUmVjb3JkcyhyZWNvcmRzKQogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBNLkZvcm1TZWxlY3QuaW5pdCh0aGlzLiRyZWZzLnNlbGVjdCkKICAgICAgICAgICAgTS51cGRhdGVUZXh0RmllbGRzKCkKICAgICAgICB9LCAwKTsKICAgICAgICB0aGlzLmxvYWRpbmc9IGZhbHNlICAgICAgICAgICAKCiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICBkaXNwbGF5VGFza3MoKXsKICAgICAgICAgICAgY29uc3QgZmlsdGVyUmVjb3JkcyA9IHRoaXMucmVjb3Jkcy5maWx0ZXIoIHQgPT4gewogICAgICAgICAgICAgICAgaWYodGhpcy5maWx0ZXIgPT09ICdhbGwnKXtyZXR1cm4gdHJ1ZX0KICAgICAgICAgICAgICAgIHJldHVybiB0LlVwZGF0ZVN0YXR1cyA9PT0gdGhpcy5maWx0ZXIKICAgICAgICAgICAgfSkKICAgICAgICAgICAgaWYoIWZpbHRlclJlY29yZHMubGVuZ3RoKXtyZXR1cm4gZmFsc2V9CiAgICAgICAgICAgIHRoaXMuc2V0dXBQYWdpbmF0aW9uKGZpbHRlclJlY29yZHMpCiAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZW1zCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6ewogICAgICAgIHNldHVwUmVjb3JkcyhyZWNvcmRzKXsKICAgICAgICAgICAgdGhpcy5yZWNvcmRzID0gcmVjb3Jkcy5tYXAocmVjb3JkID0+ewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAuLi5yZWNvcmQsCiAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ2xhc3M6IHJlY29yZC5zdGF0dXMgPT09ICdjb21wbGl0ZWQnID8gJ2dyZWVuJyA6IChyZWNvcmQuc3RhdHVzID09PSAnYWN0aXZlJykgJiYgKG5ldyBEYXRlKHJlY29yZC5kYXRlKSA+IHRoaXMuZGF0ZSk/ICd5ZWxsb3cnIDogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDogIHJlY29yZC5zdGF0dXMgPT09ICdjb21wbGl0ZWQnID8gJ2NvbXBsaXRlZCcgOiAoKG5ldyBEYXRlKHJlY29yZC5kYXRlKSA+IHRoaXMuZGF0ZSkgJiYgKHJlY29yZC5zdGF0dXMgPT09ICdhY3RpdmUnKSkgPyAnYWN0aXZlJyA6ICdvdXRkYXRlZCcsCiAgICAgICAgICAgICAgICAgICAgVXBkYXRlU3RhdHVzOiByZWNvcmQuc3RhdHVzID09PSAnY29tcGxpdGVkJyA/ICdjb21wbGl0ZWQnIDogKHJlY29yZC5zdGF0dXMgPT09ICdhY3RpdmUnKSAmJiAobmV3IERhdGUocmVjb3JkLmRhdGUpID4gdGhpcy5kYXRlKT8gJ2FjdGl2ZScgOiAnb3V0ZGF0ZWQnLAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQoKICAgICAgICB9CiAgICB9LAogICAgY29tcG9uZW50czogewogICAgICAgIFRhc2tzVGFibGUKICAgIH0KfQo="},{"version":3,"sources":["Tasks.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Tasks.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <div class=\"page-title pad-1 \">\n            <h3>Список задач </h3>\n        </div>              \n        <Loader v-if=\"loading\"/>\n        <p class=\"center\" v-else-if=\"!records.length\">Записи отсутствуют.</p>\n        <section v-else> \n            <div class=\"select-width \">\n                <label for=\"filter\">Status filter</label>   \n                <select id=\"filter\" class=\"browser-default input-field \" ref=\"select\" v-model=\"filter\">\n                    <option value=\"all\"  selected>All tasks</option>\n                    <option value=\"active\" >Active</option>\n                    <option value=\"complited\">Complited</option>\n                    <option value=\"outdated\">Outdated</option>\n                </select>\n            </div>\n            <div v-if=\"displayTasks\">\n            <TasksTable :records=\"displayTasks\"/>\n            <Paginate\n                v-model=\"page\"\n                :page-count=\"pageCount\"\n                :click-handler=\"pageChangeHandler\"\n                :prev-text=\"'Назад'\"\n                :next-text=\"'Вперед'\"\n                :container-class=\"'pagination'\"\n                :page-class=\"'waves-effect'\"\n            />  \n            </div>\n            <p class=\"center\" v-else>Записи отсутствуют.</p>\n        </section>\n    </div>\n</template>\n<script>\nimport TasksTable from '@/components/TasksTable'\nimport paginationMixin from '@/mixins/pagination_mixin'\nexport default {\n    name:'tasks',\n    metaInfo: {\n      title: 'Просмотр задач | Никита TM'\n    },\n    mixins: [paginationMixin],\n    data: ()=>({\n        loading: true,\n        records: [],\n        date: new Date(),\n        filter: 'all',\n    }),\n    async mounted(){\n        const records = await this.$store.dispatch('fetchRecords')\n        this.setupRecords(records)\n        setTimeout(() => {\n            M.FormSelect.init(this.$refs.select)\n            M.updateTextFields()\n        }, 0);\n        this.loading= false           \n\n    },\n    computed: {\n        displayTasks(){\n            const filterRecords = this.records.filter( t => {\n                if(this.filter === 'all'){return true}\n                return t.UpdateStatus === this.filter\n            })\n            if(!filterRecords.length){return false}\n            this.setupPagination(filterRecords)\n            return this.items\n        }\n    },\n    methods:{\n        setupRecords(records){\n            this.records = records.map(record =>{\n                return {\n                    ...record,\n                    statusClass: record.status === 'complited' ? 'green' : (record.status === 'active') && (new Date(record.date) > this.date)? 'yellow' : 'red',\n                    statusText:  record.status === 'complited' ? 'complited' : ((new Date(record.date) > this.date) && (record.status === 'active')) ? 'active' : 'outdated',\n                    UpdateStatus: record.status === 'complited' ? 'complited' : (record.status === 'active') && (new Date(record.date) > this.date)? 'active' : 'outdated',\n                    \n                }\n            })\n\n        }\n    },\n    components: {\n        TasksTable\n    }\n}\n</script>\n"]}]}