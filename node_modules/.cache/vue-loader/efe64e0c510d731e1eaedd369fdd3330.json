{"remainingRequest":"/Users/nikitabugaev/Desktop/t-m/task-manger/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nikitabugaev/Desktop/t-m/task-manger/src/views/DetailTask.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nikitabugaev/Desktop/t-m/task-manger/src/views/DetailTask.vue","mtime":1594067318944},{"path":"/Users/nikitabugaev/Desktop/t-m/task-manger/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nikitabugaev/Desktop/t-m/task-manger/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nikitabugaev/Desktop/t-m/task-manger/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nikitabugaev/Desktop/t-m/task-manger/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7cmVxdWlyZWQsIG1pbkxlbmd0aCwgbWF4TGVuZ3RofSBmcm9tICd2dWVsaWRhdGUvbGliL3ZhbGlkYXRvcnMnCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JwpleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhOiAoKT0+KHsKICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgZGF0ZTogbnVsbCwKICAgICAgICBjaGVja2VkOiBmYWxzZSwKICAgICAgICBkaXNhYmxlZDogZmFsc2UKICAgIH0pLAogICAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWydyZWNvcmQnXSksCiAgICAgICAgY2hlY2tTdGF0dXMoKXsKICAgICAgICAgICAgaWYodGhpcy5yZWNvcmQuc3RhdHVzID09PSAnY29tcGxpdGVkJyl7CiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSB0cnVlCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkID0gZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICB2YWxpZGF0aW9uczogewogICAgICAgIGRlc2NyaXB0aW9uOiB7bWluTGVuZ3RoOiBtaW5MZW5ndGgoMyksIG1heExlbmd0aDogbWF4TGVuZ3RoKDIwNDgpLHJlcXVpcmVkfSwKICAgICAgICBjaGVja2VkOiB7Y2hla2VkOiB2ID0+IHZ9CiAgICB9LAogICAgYXN5bmMgbW91bnRlZCgpewogICAgICAgIGNvbnN0IGlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2ZldGNoUmVjb3JkQnlJZCcsIGlkKSAgCiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IHRoaXMucmVjb3JkLmRlc2NyaXB0aW9uICAKICAgICAgICBzZXRUaW1lb3V0KCgpPT57CiAgICAgICAgICAgIHRoaXMuZGF0ZSA9IE0uRGF0ZXBpY2tlci5pbml0KHRoaXMuJHJlZnMuZGF0ZXBpY2tlciwgewogICAgICAgICAgICBmb3JtYXQ6ICdkZC5tbS55eXl5JywKICAgICAgICAgICAgZGVmYXVsdERhdGU6IG5ldyBEYXRlKHRoaXMucmVjb3JkLmRhdGUpLAogICAgICAgICAgICBzZXREZWZhdWx0RGF0ZTogdHJ1ZQogICAgICAgIH0pIAogICAgICAgIE0udXBkYXRlVGV4dEZpZWxkcygpCiAgICAgICAgTS50ZXh0YXJlYUF1dG9SZXNpemUodGhpcy4kcmVmcy50ZXh0YXJlYSkKICAgICAgICAgICAgfSwwKQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGFzeW5jIHN1Ym1pdEhhbmRsZXIoKXsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZCA/IHRoaXMuc3RhdHVzID0gJ2NvbXBsaXRlZCc6IHRoaXMuc3RhdHVzID0gJ2FjdGl2ZScKICAgICAgICAgICAgICAgIGlmICgodGhpcy4kdi5jaGVja2VkLiRpbnZhbGlkICYmIHRoaXMuJHYuZGVzY3JpcHRpb24uJGludmFsaWQpIHx8ICghdGhpcy4kdi5jaGVja2VkLiRpbnZhbGlkICYmIHRoaXMuJHYuZGVzY3JpcHRpb24uJGludmFsaWQpKXsKICAgICAgICAgICAgICAgIHRoaXMuJHYuJHRvdWNoKCkKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gOiB0aGlzLmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwKICAgICAgICAgICAgICAgICAgICBkYXRlOiB0aGlzLmRhdGUuZGF0ZS50b0pTT04oKSwKICAgICAgICAgICAgICAgIH0gICAKICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1cGRhdGVSZWNvcmQnLCBmb3JtRGF0YSkKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoJ9CX0LDQv9C40YHRjCDRg9GB0L/QtdGI0L3QviDQvtCx0L3QvtCy0LvQtdC90LAnKQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge30KICAgICAgICAgICAKICAgICAgICB9LAogICAgICAgIGFzeW5jIGRlbGV0ZVJlY29yZCgpewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQKICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdkZWxldGVSZWNvcmRCeUlkJywgaWQpCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKCfQl9Cw0L/QuNGB0Ywg0YPRgdC/0LXRiNC90L4g0YPQtNCw0LvQtdC90LAnKQogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy90YXNrcycpIAogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge30KICAgICAgICAgICAgCiAgICAgICAgfQogICAgfSwKICAgIGRlc3Ryb3llZCgpewogICAgICAgIGlmKHRoaXMuZGF0ZSAmJiB0aGlzLmRhdGUuZGVzdHJveSl7CiAgICAgICAgICAgIHRoaXMuZGF0ZS5kZXN0cm95KCkKICAgICAgICB9CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjbGVhclJlY29yZCcpCiAgICB9Cn0K"},{"version":3,"sources":["DetailTask.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DetailTask.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <Loader v-if=\"loading\" />\n        <div class=\"home-page\" v-else>        \n            <div class=\"page-title\">\n                <h3>{{this.record.title}}</h3>\n            </div>\n            <section>\n                <div  class=\"chip\"  v-for=\" value in this.record.tags\" :key=\"value.tag\">\n                    {{value.tag}}\n                </div>\n                <form @submit.prevent=\"submitHandler\">\n                    <label for=\"date\">Дедлайн</label>\n                    <input  id=\"date\" type=\"text\" class=\"datepicker\" ref=\"datepicker\">\n\n                    <div class=\"input-field\">\n                        <textarea id=\"textarea1\" class=\"materialize-textarea\"\n                            ref=\"textarea\"\n                            v-model.trim=\"$v.description.$model\"\n                            :class=\"{invalid: ($v.description.$dirty && !$v.description.minLength)  || ($v.description.$dirty && !$v.description.required)}\"\n                        > \n                        </textarea>\n                        <label for=\"textarea1\">Введите описание задачи</label>\n                        <span class=\"helper-text right\"\n                        > \n                            Кол-во символов: {{description.length}} /{{$v.description.$params.maxLength.max}} \n                        </span>\n                        <label for=\"textarea1\">Введите описание задачи</label>\n                        <span class=\"helper-text right\"\n                        > \n                        </span>\n                        <p>\n                            <label>\n                                <input type=\"checkbox\" class=\"filled-in\" v-model=\"checked\" :disabled=\"checkStatus\"/>\n                                <span>Завершить выполнение</span>\n                            </label>\n                        </p>\n                        <button class=\"btn waves-effect waves-light left\" type=\"submit\">\n                            Обновить\n                            <i class=\"material-icons right\">send</i>\n                        </button> \n                    </div>\n                </form>\n                <button class=\"btn waves-effect red right\" type=\"button\" @click.prevent=\"deleteRecord\" >\n                            Удалить \n                            <i class=\"material-icons right\">send</i>\n                </button>\n            </section>\n        </div>\n    </div>\n</template>\n\n<script>\nimport {required, minLength, maxLength} from 'vuelidate/lib/validators'\nimport { mapGetters, mapActions } from 'vuex'\nexport default {\n    data: ()=>({\n        loading: true,\n        title: '',\n        description: '',\n        date: null,\n        checked: false,\n        disabled: false\n    }),\n    computed: {\n    ...mapGetters(['record']),\n        checkStatus(){\n            if(this.record.status === 'complited'){\n                this.checked = true\n                return true\n            } else {\n                this.checked = false\n            }\n        }\n    },\n    validations: {\n        description: {minLength: minLength(3), maxLength: maxLength(2048),required},\n        checked: {cheked: v => v}\n    },\n    async mounted(){\n        const id = this.$route.params.id\n        await this.$store.dispatch('fetchRecordById', id)  \n        this.description = this.record.description  \n        setTimeout(()=>{\n            this.date = M.Datepicker.init(this.$refs.datepicker, {\n            format: 'dd.mm.yyyy',\n            defaultDate: new Date(this.record.date),\n            setDefaultDate: true\n        }) \n        M.updateTextFields()\n        M.textareaAutoResize(this.$refs.textarea)\n            },0)\n        this.loading = false\n    },\n    methods: {\n        async submitHandler(){\n            try {\n                this.checked ? this.status = 'complited': this.status = 'active'\n                if ((this.$v.checked.$invalid && this.$v.description.$invalid) || (!this.$v.checked.$invalid && this.$v.description.$invalid)){\n                this.$v.$touch()\n                return\n                }\n                const formData = {\n                    description : this.description,\n                    status: this.status,\n                    id: this.$route.params.id,\n                    date: this.date.date.toJSON(),\n                }   \n                await this.$store.dispatch('updateRecord', formData)\n                this.$message('Запись успешно обновлена')\n            } catch (error) {}\n           \n        },\n        async deleteRecord(){\n            try {\n                const id = this.$route.params.id\n                await this.$store.dispatch('deleteRecordById', id)\n                this.$message('Запись успешно удалена')\n                this.$router.push('/tasks') \n            } catch (error) {}\n            \n        }\n    },\n    destroyed(){\n        if(this.date && this.date.destroy){\n            this.date.destroy()\n        }\n        this.$store.commit('clearRecord')\n    }\n}\n</script>"]}]}